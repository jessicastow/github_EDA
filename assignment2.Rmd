---
title: "Exploratory Data Analysis on Earthquake Data"
author: "Your Name"
date: "`r Sys.Date()`"
output:
  pdf_document:
    toc: true
    toc_depth: 3
    number_sections: true
---

The following packages were installed: tidyverse, lubridate, ggplot2, sf, dplyr
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(lubridate)
library(ggplot2)
library(sf)
library(dplyr)
library(readr)
```

# Plagiarism declaration

I know that plagiarism is wrong. Plagiarism is to use another's work and pretend that it is one's own.
I have used the required convention for citation and referencing. Each contribution to and quotation in this assignment from the work(s) of other people has been attributed, and has been cited and referenced.
This assignment is my own work.
I have not allowed, and will not allow, anyone to copy my work with the intention of passing it off as his or her own work.
I acknowledge that copying someone else's assignment or essay, or part of it, is wrong, and declare that this is my own work.

# Introdcution to Problem


# Data Wrangling

The data from the "Earthquakes 1965 - 2016.csv" and "query.csv" files were read into R as dataframes. The dataframes were named `earthquakes` and `query`.
```{r}
earthquakes <-read.csv("Earthquakes 1965 - 2016.csv")
query <- read.csv("query.csv")
```

The column names and their respective data types for the `earthquakes` dataframe were viewed, their names and datatypes were as follows:
```{r}
str(earthquakes)
```

The column names and their respective data types for the `query` dataframe were viewed, they were as follows:
```{r}
str(query)
```

In the `query` table the `time` column contains milliseconds and is in a different format from that in the `earthquakes` table. The milliseconds were removed from the column.
```{r}
query <- query %>%
  mutate(time = ymd_hms(time)) # remove the milliseconds from the column
```

There must only be one date-time variable (note that all times are UTC).

The `Date` and `Time` columns in the earthquake dataframe were combined into one column `DateTime` and then converted to a datetime class. 
```{r}
earthquakes$DateTime <- paste(earthquakes$Date, earthquakes$Time) # Combine the `Date` and `Time` columns using paste() function
earthquakes$DateTime <- as.POSIXct(earthquakes$DateTime, format="%m/%d/%Y %H:%M:%S") # convert `DateTime` column to a POSIXct (datetime) datatype
earthquakes$DateTime <- ymd_hms(earthquakes$DateTime) # convert to a better data format
```

The `Date` and `Time` columns in the Earthquakes dataframe were then dropped.
```{r}
earthquakes <- subset(earthquakes, select = -c(Date, Time))
```

Provide a summary of the types of events and then filter the observations to only include
“Earthquake” type events.
```{r}
#code here
```


Only the earthquake events were kept from the query and earthquakes dataframes.
```{r}
query <- subset(query, type == "earthquake")
earthquakes <- subset(earthquakes, Type == "Earthquake")
# keep rows where type is equal to earthquake
```


Only use common variables, i.e. similar information contained in both datasets.
 
Drop the the `place`, `type`, `net`, `status`, `updated`, `locationSource` and `magSource` columns in the `query` dataframe

Place is just a text descr not helpful for analyses
status has to do with how data were recorded, 
net 
```{r}
query <- subset(query, 
                select = -c(place, type, net, status, updated, locationSource, magSource))

colnames(query)
```

The `Type`, `Source`, `Location.Source`, `Magnitude.Source`, and `Status` columns were dropped from the `earthquake` dataframe
```{r}
earthquakes <- subset(earthquakes, 
                      select = -c(Type, Source, Location.Source, Magnitude.Source, Status))
colnames(earthquakes)
```

```{r}
# Rename 'query' column names
query <- rename(query,
                DepthSeismicStation = nst,
                DateTime = time,
                Latitude = latitude,
                Longitude = longitude,
                Depth = depth,
                Magnitude = mag, 
                MagType = magType,
                AzimuthalGap = gap, 
                HorizontalDistance = dmin,
                RootMeanSquare = rms,  
                ID = id,
                HorizontalError = horizontalError, 
                DepthError = depthError,
                MagError = magError,
                MagnitudeSeismicStation = magNst)

str(query)
```


```{r}
earthquakes <- rename(earthquakes, 
                      DepthError = Depth.Error,
                      DepthSeismicStation = Depth.Seismic.Stations,
                      MagType = Magnitude.Type, 
                      MagError = Magnitude.Error, 
                      MagnitudeSeismicStation = Magnitude.Seismic.Stations,
                      AzimuthalGap = Azimuthal.Gap, 
                      HorizontalDistance = Horizontal.Distance, 
                      HorizontalError = Horizontal.Error,
                      RootMeanSquare = Root.Mean.Square
                      )

str(earthquakes)
```

 The time frames overlap; you may use/remove these observations from either set.
 Filter the `earthquakes` dataset to only include dates up to, but not including, 1 December 2016. 
```{r}
earthquakes <- earthquakes %>% 
  filter(DateTime < as.Date("2016-12-01"))

max(earthquakes$DateTime, na.rm = TRUE) # earthquakes latest date is now 30 Nov 2016

min(query$DateTime, na.rm = TRUE) # query earliest date is 1 Dec 2016

```
Merge the data sets together
```{r}
df <- rbind(earthquakes, query)

# write.csv(df, "earthquakes_combined.csv")
```

Add a categorical variable “Scale”, which classifies the earthquakes according to their
magnitude. Classify and name the categories according to the “Description” column in
the table on this page
```{r}
#code here
```

Explore the range of magnitudes (Richter scale) in both datasets. Is there a reason to
exclude any measurements in either? Implement and discuss briefly.
```{r}
# code here
```

Report on the extent of missing data in the common variables. Is it worth keeping any of the information for variables with missing data? Likewise for common variables with a discrepancy in values. Implement and discuss briefly.
```{r}
# code here
```

# Initial Exploration 
